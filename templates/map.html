<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C //DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xml:lang="en" lang="en"
      metal:use-macro="master.macros.layout">
    <div metal:fill-slot="header" tal:omit-tag="">
    <title>We Love Public Service | Show Your Appreciation for #PublicService </title>
    <script src="/js/yqlgeo.js"></script> 
    <script>
    $(document).ready(function(){
            
    $(window).ready(function(){  
            //initiate_geolocation();  
        });   

        function initiate_geolocation() {  
        if (navigator.geolocation)  
        {  
            navigator.geolocation.getCurrentPosition(handle_geolocation_query, handle_errors);  
        }  
        else  
        {  
            yqlgeo.get('visitor', normalize_yql_response);  
        }  
    }  
  
    function handle_errors(error)  
    {  
        switch(error.code)  
        {  

            case error.PERMISSION_DENIED: $('#errormsg').val('user did not share geolocation data');  
            break;  
  
            case error.POSITION_UNAVAILABLE: $('#errormsg').val('could not detect current position');  
            break;  
  
            case error.TIMEOUT: $('#errormsg').val('retrieving position timedout');  

            break;  
  
            default: console.log("unknown error");  
            break;  
        }  
    }  
  
    function normalize_yql_response(response)  
    {  
        if (response.error)  
        {  
            var error = { code : 0 };  
            handle_error(error);  
            return;  
        }  
  
        var position = {  
            coords :  
            {  
                latitude: response.place.centroid.latitude,  
                longitude: response.place.centroid.longitude  
            },  
            address :  
            {  
                city: response.place.locality2.content,  
                region: response.place.admin1.content,  
                country: response.place.country.content  
            }  
        };  
  
        handle_geolocation_query(position);  
    }    
  
        function handle_geolocation_query(position){  
            $('#lat').val(position.coords.latitude);
            $('#lon').val(position.coords.longitude);
        };
    </script>
    
    </div>
    <div tal:omit-tag="" metal:fill-slot="socialbuttons">
        <div id="sthoverbuttons" class="sthoverbuttons-pos-left">
            <span  class='st_twitter_large' ></span><br /><span  class='st_facebook_large' ></span><br /><span  class='st_email_large' ></span><br />
        </div>
    </div>
    <div tal:omit-tag="" metal:fill-slot="main">
        <!--comment on the repeat-->
        <div tal:repeat="quote quotes">
            <h1 class="quote">&ldquo;<a href="/" tal:attributes="href string:'/'" tal:content="quote.quote|default">I had lost my dog but the nice lady brought it back to me</a>&rdquo;</h1>
            <div class="who-where">&mdash;&nbsp;<span tal:replace="quote.name|default">John Perry Snow</span>, <span tal:replace="quote.city|default">Albawhatsee</span>, <span tal:replace="quote.state|default">MS</span></div>
            
            <div class="actions"><a href="/" class="button"><span>More</span></a></div>
        </div>
    </div>
    
    <div metal:fill-slot="foot" class="logos">
        <a href="http://codeforamerica.org"><img src="/images/cfawhite.png" height="100px"/></a>
        <a href="http://govloop.com"><img src="/images/govloopwhite.png"  height="100px"/></a>
    <br />    <br />
    
       <small>Questions? <a href="mailto:admin@welovepublicservice.org" style="color: white;">Drop us a line.</a></small>
    </div>
     
</html>
